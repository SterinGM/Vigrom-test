# Тестовое задание

Для разворачивания проекта я не стал делать docker окружение и предпологаю что на системе уже установлен PHP
 и PostgreSQL, а так же composer.
 
Необходимо склонировать проект с репозитория: `git clone git@github.com:SterinGM/Vigrom-test.git`

После необходмо перейти в папку проекта: `cd Vigrom-test`

Устанавливаем все необходимые пакеты: `composer install`

Создаем локальный конфиг с параметрами окружения: `composer dump-env dev`

Открываем файл **.env.local.php** и настраиваем там параметр **DATABASE_URL** для подключения к вашей БД

Далее создаем БД для проекта: `bin/console doctrine:database:create`

Применяем все миграции: `bin/console doctrine:migrations:migrate`

Загружаем тестовые данные в БД: `bin/console doctrine:fixtures:load`

И запускаем локальный сервер для работы: `php -S localhost:8000 -t public/`

После этого можно открыть в браузере наше приложение: `http://localhost:8000/api/doc`


В апи доступно 2 метода:
1. **GET** `/api/wallets/{id}/amount` - Метод для получения текущего баланса
2. **POST** `/api/wallets/change_balance` - Метод для изменения баланса


SQL запрос, который вернет сумму, полученную по причине refund за
последние 7 дней:
~~~~
`SELECT SUM(amount) FROM transaction WHERE reason = 'REFUND' AND created_at > NOW() - interval '7 days';`
~~~~

В проекте есть места которые можно еще переделать.
К примеру написать ArgumentResolver для автоматического преобразование данных из запроса в объект.
Так же можно спроектировать собственные модели данных для бизнес логики, чтобы отвязать ее от БД.

Вообщем вылизывать проект можно еще долго, но это затянет выполнение тестового задания.

Так что показываю данный вариант. 